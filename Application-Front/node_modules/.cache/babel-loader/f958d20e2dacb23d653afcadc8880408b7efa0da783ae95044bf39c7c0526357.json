{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\FiercePC\\\\Desktop\\\\VSCode\\\\Appli-EPRD_Drive_API\\\\application-front\\\\src\\\\Components\\\\Admin\\\\AdminPage.js\",\n  _s = $RefreshSig$();\nimport \"./AdminPage.css\";\n// Importation des bibliothèques nécessaires\nimport React, { useEffect, useState, useRef } from \"react\";\n// import { useNavigate } from \"react-router-dom\";\nimport DocumentAdmin from \"../Admin/DocumentAdmin\";\nimport UserCard from \"../Admin/UserCard\";\nimport FileUpload from \"./Modal/FileUpload\";\nimport CreateUser from \"./Modal/CreateUser\";\nimport TrashModal from \"./Modal/TrashModal\";\nimport { useLocation } from \"react-router-dom\";\nimport imgTrash from \"../../images/trash-can-solid.svg\";\nimport imgPlus from \"../../images/plus-solid (1).svg\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AdminPage = () => {\n  _s();\n  const location = useLocation();\n  const {\n    state\n  } = location;\n  const username = state.username || \"'Utilisateur non identifié'\";\n  const [collection, setCollection] = useState(state.collection || []);\n  const [listUsers, setListUsers] = useState(state.listUsers || []);\n  const [dataDelete, setDataDelete] = useState([]);\n  const [changeDB, setChangeDB] = useState(false);\n\n  //  pour le rafraîchissement\n  const changeOnDB = bool => {\n    setChangeDB(bool);\n  };\n\n  // affichage listes des partitions disponibles pour chaque utilisateur (onhover)\n  const showList = index => {\n    let popup = document.getElementById(\"popup\" + index);\n    popup.style.display = \"block\";\n  };\n  const hideList = index => {\n    let popup = document.getElementById(\"popup\" + index);\n    popup.style.display = \"none\";\n  };\n  const [dragOrigin, setDragOrigin] = useState(\"\");\n\n  // drag and drop functions\n  const onDragStartDoc = event => {\n    const titre = event.target.getAttribute(\"titre\");\n    const data = JSON.stringify({\n      \"type\": \"doc\",\n      \"docId\": event.target.id,\n      \"titre\": titre,\n      \"userId\": \"\",\n      \"alias\": \"\"\n    });\n    event.dataTransfer.setData(\"application/json\", data);\n    // code ci-dessous sert à \"cibler\" la bonne poubelle (dans le JSX)\n    setDragOrigin(\"doc\");\n  };\n  const onDragStartUser = event => {\n    // utilisation de l'attribut data-alias créé dans userCard\n    const alias = event.target.getAttribute(\"data-alias\");\n    const data = JSON.stringify({\n      \"type\": \"user\",\n      \"docId\": \"\",\n      \"titre\": \"\",\n      \"userId\": event.target.id,\n      \"alias\": alias\n    });\n    event.dataTransfer.setData(\"application/json\", data);\n\n    // code ci-dessous sert à \"cibler\" la bonne poubelle\n    setDragOrigin(\"user\");\n  };\n  const onDragStartUserDoc = (titre, userId, alias, docId, event) => {\n    const data = JSON.stringify({\n      \"type\": \"userDoc\",\n      \"docId\": docId,\n      \"titre\": titre,\n      \"userId\": id,\n      \"alias\": alias\n    });\n    event.dataTransfer.setData(\"application/json\", data);\n    event.stopPropagation();\n    // code ci-dessous sert à \"cibler\" la bonne poubelle\n    setDragOrigin(\"user\");\n  };\n  const onDragOver = event => {\n    event.preventDefault();\n  };\n  // drop function\n  const onDrop = async (event, targetItem = \"trash\") => {\n    event.preventDefault();\n    const draggedElementJSON = JSON.parse(event.dataTransfer.getData(\"application/json\"));\n\n    // cible + des utilisateurs\n    if (targetItem !== \"trash\") {\n      console.log(draggedElementJSON, targetItem);\n      try {\n        const response = await fetch(\"https://127.0.0.1:8000/drive_API/addFileToUser\", {\n          method: \"POST\",\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            file_id: draggedElementJSON.docId,\n            user_id: targetItem.user.id_user\n          })\n        });\n        const dataResponse = await response.json();\n        if (!response.ok) {\n          console.error(\"Erreur de transfert d'un dossier à un utilisateur\");\n        } else {\n          console.log(\"Réponse:\", dataResponse);\n          changeOnDB(true);\n        }\n      } catch (error) {\n        console.error(\"Erreur:\", error);\n      }\n    } else if (targetItem === \"trash\") {\n      if (draggedElementJSON.type === \"doc\") {\n        setDataDelete([draggedElementJSON.type, draggedElementJSON.docId, draggedElementJSON.titre]);\n        ModalOpen3();\n      } else if (draggedElementJSON.type === \"user\") {\n        //  alert(\n        //      \"Voulez-vous vraiment supprimer l'utilisateur \" +\n        //          draggedElementJSON.userId +\n        //          \" ?\"\n        //  );\n        setDataDelete([draggedElementJSON.type, draggedElementJSON.userId, draggedElementJSON.alias]);\n        ModalOpen3();\n      } else if (draggedElementJSON.type === \"userDoc\") {\n        //  alert(\n        //      \"Voulez-vous vraiment supprimer la partition \" +\n        //          draggedElementJSON.titre +\n        //          \" de l'utilisateur \" +\n        //          draggedElementJSON.userId +\n        //          \" ?\"\n        //  );\n        setDataDelete([draggedElementJSON.type, draggedElementJSON.docId, draggedElementJSON.titre, draggedElementJSON.userId, draggedElementJSON.alias]);\n        ModalOpen3();\n      }\n    }\n  };\n  const [showModal1, setShowModal1] = useState(false);\n  const [showModal2, setShowModal2] = useState(false);\n  const [showModal3, setShowModal3] = useState(false);\n\n  // rafraichissement (si la BDD évolue)\n  useEffect(() => {\n    if (changeDB) {\n      const fetchUpdatedData = async () => {\n        try {\n          const response = await fetch(\"https://127.0.0.1:8000/drive_API/user\", {\n            method: \"GET\",\n            headers: {\n              Authorization: `Bearer ` + localStorage.getItem(\"token\"),\n              \"Content-Type\": \"application/json\"\n            }\n          });\n          const updatedData = await response.json();\n\n          // Remplace la collection et la liste des utilisateurs avec les nouvelles données\n          setCollection(updatedData.collection);\n          setListUsers(updatedData.listUsers);\n        } catch (error) {\n          console.error(\"Erreur lors du rafraîchissement des données\", error);\n        }\n      };\n      fetchUpdatedData();\n      changeOnDB(false);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [changeDB]);\n  const ModalOpen1 = event => {\n    console.log(event.target.id);\n    setShowModal1(true);\n  };\n  const ModalOpen2 = event => {\n    console.log(event.target.id);\n    setShowModal2(true);\n  };\n  const ModalOpen3 = () => {\n    setShowModal3(true);\n  };\n  const handleClose1 = () => setShowModal1(false);\n  const handleClose2 = () => setShowModal2(false);\n  const handleClose3 = () => setShowModal3(false);\n\n  // logique pour ajouter le fondNoir\n  const [isAtTop1, setIsAtTop1] = useState(false);\n  const [isAtTop2, setIsAtTop2] = useState(false);\n  const ref1 = useRef(null);\n  const ref2 = useRef(null);\n  useEffect(() => {\n    const checkPosition = () => {\n      if (ref1.current) {\n        const topPosition1 = ref1.current.getBoundingClientRect().top;\n        setIsAtTop1(topPosition1 === 5);\n      }\n      if (ref2.current) {\n        const topPosition2 = ref2.current.getBoundingClientRect().top;\n        setIsAtTop2(topPosition2 === 5);\n      }\n    };\n    window.addEventListener(\"scroll\", checkPosition); // Suivre le scroll si l'élément peut bouger\n  }, []);\n\n  // JSX\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fond\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\"Bonjour \", username]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"present\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"align\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Bienvenue sur l'interface d'administration de ta partoth\\xE8que!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Ici tu pourras: \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"Ajouter/ Supprimer des partitions de ta partoth\\xE8que\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"Ajouter/ Supprimer des utilisateurs avec qui tu veux partager les partitions\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"Visualiser (au survol) les partitions disponibles dans la partoth\\xE8que de tes utilisateurs\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"Partager tes partitions avec les utilisateurs (en faisant un \\\"glisser/d\\xE9poser' de la partition sur l'utilisateur) ou supprimer des partitions de leur liste (glisser/d\\xE9poser dans la poubelle)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"containerAdmin\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"admin\",\n          children: \"Partitions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"CD\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"CDFondNoir\",\n            ref: ref1,\n            style: {\n              backgroundColor: isAtTop1 ? \"rgba(0,0,0,0.95)\" : \"transparent\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"plus\",\n              \"data-title\": \"Cliquer ici pour ajouter une partition \\xE0 la collection\",\n              onClick: event => ModalOpen1(event),\n              id: \"plusPart\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: imgPlus,\n                alt: \"ajouter\",\n                draggable: \"false\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 314,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 308,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"trash\",\n              src: imgTrash,\n              alt: \"poubelle\",\n              onDragOver: dragOrigin === \"doc\" ? onDragOver : null,\n              draggable: \"true\",\n              onDrop: event => onDrop(event)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"listDoc\",\n          children: collection.length === 0 ? /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"noData\",\n            children: \"Aucun utilisateur disponible\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 29\n          }, this) : collection.map((user, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n            draggable: \"true\",\n            onDragStart: onDragStartDoc,\n            id: user[1],\n            titre: user[0],\n            children: /*#__PURE__*/_jsxDEV(DocumentAdmin, {\n              titre: user[0]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 346,\n              columnNumber: 37\n            }, this)\n          }, \"collection\" + index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"containerUser\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"admin\",\n          children: \"Liste d'utilisateurs\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"CD\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"CDFondNoir\",\n            ref: ref2,\n            style: {\n              backgroundColor: isAtTop2 ? \"rgba(0,0,0,0.95)\" : \"transparent\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"plus\",\n              \"data-title\": \"Cliquer ici pour ajouter un utilisateur\",\n              onClick: event => ModalOpen2(event),\n              id: \"plusUser\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: imgPlus,\n                alt: \"ajouter\",\n                draggable: \"false\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 370,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"trash\",\n              src: imgTrash,\n              alt: \"poubelle\",\n              onDragOver: dragOrigin === \"user\" ? onDragOver : null,\n              draggable: \"true\",\n              onDrop: event => onDrop(event)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 376,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: listUsers.length === 0 ? /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"noData\",\n            children: \"Aucun utilisateur disponible\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 29\n          }, this) : listUsers.map((user, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n            onMouseEnter: () => showList(index),\n            onMouseLeave: () => hideList(index),\n            onDragOver: onDragOver,\n            onDrop: event => onDrop(event, {\n              user\n            }),\n            id: user.id_user,\n            onDragStart: onDragStartUser,\n            children: /*#__PURE__*/_jsxDEV(UserCard, {\n              alias: user.name,\n              id: index,\n              userId: user.id_user,\n              titres: user.titres,\n              onDragStartUserDocFnct: onDragStartUserDoc\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 37\n            }, this)\n          }, user.id_user, false, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(FileUpload, {\n          show: showModal1,\n          handleClose: handleClose1,\n          changeOnDB: changeOnDB\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(CreateUser, {\n          show: showModal2,\n          handleClose: handleClose2\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(TrashModal, {\n          show: showModal3,\n          handleClose: handleClose3,\n          data: dataDelete,\n          changeOnDB: changeOnDB\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 265,\n    columnNumber: 9\n  }, this);\n};\n_s(AdminPage, \"qpCrtdwQ6YXFeOtiRncX30AI0vo=\", false, function () {\n  return [useLocation];\n});\n_c = AdminPage;\nexport default AdminPage;\nvar _c;\n$RefreshReg$(_c, \"AdminPage\");","map":{"version":3,"names":["React","useEffect","useState","useRef","DocumentAdmin","UserCard","FileUpload","CreateUser","TrashModal","useLocation","imgTrash","imgPlus","jsxDEV","_jsxDEV","AdminPage","_s","location","state","username","collection","setCollection","listUsers","setListUsers","dataDelete","setDataDelete","changeDB","setChangeDB","changeOnDB","bool","showList","index","popup","document","getElementById","style","display","hideList","dragOrigin","setDragOrigin","onDragStartDoc","event","titre","target","getAttribute","data","JSON","stringify","id","dataTransfer","setData","onDragStartUser","alias","onDragStartUserDoc","userId","docId","stopPropagation","onDragOver","preventDefault","onDrop","targetItem","draggedElementJSON","parse","getData","console","log","response","fetch","method","headers","Authorization","localStorage","getItem","body","file_id","user_id","user","id_user","dataResponse","json","ok","error","type","ModalOpen3","showModal1","setShowModal1","showModal2","setShowModal2","showModal3","setShowModal3","fetchUpdatedData","updatedData","ModalOpen1","ModalOpen2","handleClose1","handleClose2","handleClose3","isAtTop1","setIsAtTop1","isAtTop2","setIsAtTop2","ref1","ref2","checkPosition","current","topPosition1","getBoundingClientRect","top","topPosition2","window","addEventListener","className","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","backgroundColor","onClick","src","alt","draggable","length","map","onDragStart","onMouseEnter","onMouseLeave","name","titres","onDragStartUserDocFnct","show","handleClose","_c","$RefreshReg$"],"sources":["C:/Users/FiercePC/Desktop/VSCode/Appli-EPRD_Drive_API/application-front/src/Components/Admin/AdminPage.js"],"sourcesContent":["import \"./AdminPage.css\";\r\n// Importation des bibliothèques nécessaires\r\nimport React, { useEffect, useState, useRef } from \"react\";\r\n// import { useNavigate } from \"react-router-dom\";\r\nimport DocumentAdmin from \"../Admin/DocumentAdmin\";\r\nimport UserCard from \"../Admin/UserCard\";\r\nimport FileUpload from \"./Modal/FileUpload\";\r\nimport CreateUser from \"./Modal/CreateUser\";\r\nimport TrashModal from \"./Modal/TrashModal\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport imgTrash from \"../../images/trash-can-solid.svg\";\r\nimport imgPlus from \"../../images/plus-solid (1).svg\";\r\n\r\n\r\nconst AdminPage = () => {\r\n    const location = useLocation();\r\n    const { state } = location;\r\n    const username = state.username || \"'Utilisateur non identifié'\";\r\n    const [collection, setCollection] = useState(state.collection || []);\r\n    const [listUsers, setListUsers] = useState(state.listUsers || []);\r\n\r\n    const [dataDelete, setDataDelete] = useState([])\r\n    const [changeDB, setChangeDB] = useState(false)\r\n\r\n    //  pour le rafraîchissement\r\n   const changeOnDB= (bool) => {\r\n    setChangeDB(bool)\r\n   }\r\n\r\n    \r\n\r\n        // affichage listes des partitions disponibles pour chaque utilisateur (onhover)\r\n        const showList = (index) =>  {\r\n            let popup= document.getElementById(\"popup\"+index);\r\n           popup.style.display = \"block\";\r\n        }\r\n        const hideList = (index) =>  {\r\n            let popup= document.getElementById(\"popup\"+index);\r\n           popup.style.display = \"none\";\r\n        }\r\n\r\n        const [dragOrigin, setDragOrigin]= useState(\"\");\r\n            \r\n        // drag and drop functions\r\n         const onDragStartDoc = (event) => {\r\n             const titre = event.target.getAttribute(\"titre\");\r\n                const data = JSON.stringify({\r\n                    \"type\": \"doc\",\r\n                    \"docId\": event.target.id,\r\n                    \"titre\": titre,\r\n                    \"userId\": \"\",\r\n                    \"alias\": \"\",\r\n                });\r\n                \r\n                \r\n                event.dataTransfer.setData(\"application/json\", data);\r\n            // code ci-dessous sert à \"cibler\" la bonne poubelle (dans le JSX)\r\n                setDragOrigin(\"doc\");\r\n         };\r\n\r\n         const onDragStartUser = (event) => {\r\n            // utilisation de l'attribut data-alias créé dans userCard\r\n             const alias = event.target.getAttribute(\"data-alias\");\r\n             \r\n              const data = JSON.stringify({\r\n                  \"type\": \"user\",\r\n                  \"docId\": \"\",\r\n                  \"titre\": \"\",\r\n                  \"userId\": event.target.id,\r\n                  \"alias\": alias,\r\n              });\r\n\r\n              event.dataTransfer.setData(\"application/json\", data);\r\n             \r\n             // code ci-dessous sert à \"cibler\" la bonne poubelle\r\n             setDragOrigin(\"user\");\r\n         };\r\n\r\n         const onDragStartUserDoc = ( titre, userId, alias, docId, event) => {\r\n           \r\n             const data = JSON.stringify({\"type\":\"userDoc\", \"docId\": docId, \"titre\":titre, \"userId\":id, \"alias\": alias  });\r\n             event.dataTransfer.setData(\"application/json\", data);\r\n             \r\n             event.stopPropagation();\r\n             // code ci-dessous sert à \"cibler\" la bonne poubelle\r\n             setDragOrigin(\"user\");\r\n         };\r\n       \r\n\r\n          const onDragOver = (event) => {\r\n              event.preventDefault();\r\n          };\r\n        // drop function\r\n        const onDrop = async (event, targetItem=\"trash\") => {\r\n            event.preventDefault();\r\n            const draggedElementJSON =\r\n               JSON.parse (event.dataTransfer.getData(\"application/json\"));\r\n                \r\n           \r\n            // cible + des utilisateurs\r\n            if(targetItem!==\"trash\")  {\r\n                console.log(draggedElementJSON, targetItem);\r\n               \r\n                  try {\r\n      \r\n                const response = await fetch(\r\n                    \"https://127.0.0.1:8000/drive_API/addFileToUser\",\r\n                    {\r\n                        method: \"POST\",\r\n                        headers: {\r\n                            Authorization: `Bearer ${localStorage.getItem(\r\n                                \"token\"\r\n                            )}`,\r\n                            \"Content-Type\": \"application/json\",\r\n                        },\r\n                        body: JSON.stringify({\r\n                            file_id: draggedElementJSON.docId,\r\n                            user_id: targetItem.user.id_user,\r\n                        }),\r\n                    }\r\n                );\r\n\r\n                const dataResponse = await response.json();\r\n                if (!response.ok) {\r\n                    console.error(\"Erreur de transfert d'un dossier à un utilisateur\");\r\n                } else {\r\n                    console.log(\"Réponse:\", dataResponse);\r\n                    changeOnDB(true);\r\n                   \r\n                }\r\n            } catch (error) {\r\n                console.error(\"Erreur:\", error);\r\n            }\r\n            }\r\n\r\n            else if (targetItem === \"trash\") {\r\n                \r\n                if (draggedElementJSON.type === \"doc\") {\r\n                   setDataDelete([draggedElementJSON.type,\r\n                        draggedElementJSON.docId, draggedElementJSON.titre])\r\n                    ModalOpen3()\r\n                    ;\r\n                } else if (draggedElementJSON.type === \"user\") {\r\n                    //  alert(\r\n                    //      \"Voulez-vous vraiment supprimer l'utilisateur \" +\r\n                    //          draggedElementJSON.userId +\r\n                    //          \" ?\"\r\n                    //  );\r\n                      setDataDelete([\r\n                          draggedElementJSON.type,\r\n                          draggedElementJSON.userId,\r\n                          draggedElementJSON.alias,\r\n                      ]);\r\n                    ModalOpen3(\r\n                    );\r\n                } else if (draggedElementJSON.type === \"userDoc\") {\r\n                    //  alert(\r\n                    //      \"Voulez-vous vraiment supprimer la partition \" +\r\n                    //          draggedElementJSON.titre +\r\n                    //          \" de l'utilisateur \" +\r\n                    //          draggedElementJSON.userId +\r\n                    //          \" ?\"\r\n                    //  );\r\n                      setDataDelete([\r\n                          draggedElementJSON.type,\r\n                          draggedElementJSON.docId,\r\n                          draggedElementJSON.titre,\r\n                          draggedElementJSON.userId,\r\n                          draggedElementJSON.alias,\r\n                      ]);\r\n                    ModalOpen3(\r\n                    );\r\n                }\r\n            }\r\n           \r\n        }\r\n\r\n        \r\n        const [showModal1, setShowModal1] = useState(false);\r\n        const [showModal2, setShowModal2] = useState(false);\r\n        const [showModal3, setShowModal3] = useState(false);\r\n        \r\n        // rafraichissement (si la BDD évolue)\r\n   useEffect(() => {\r\n       if (changeDB) {\r\n           const fetchUpdatedData = async () => {\r\n               try {\r\n                   const response = await fetch(\r\n                       \"https://127.0.0.1:8000/drive_API/user\",\r\n                       {\r\n                           method: \"GET\",\r\n                           headers: {\r\n                               Authorization:\r\n                                   `Bearer ` + localStorage.getItem(\"token\"),\r\n                               \"Content-Type\": \"application/json\",\r\n                           },\r\n                       }\r\n                   );\r\n                   const updatedData = await response.json();\r\n\r\n                   // Remplace la collection et la liste des utilisateurs avec les nouvelles données\r\n                   setCollection(updatedData.collection);\r\n                   setListUsers(updatedData.listUsers);\r\n               } catch (error) {\r\n                   console.error(\r\n                       \"Erreur lors du rafraîchissement des données\",\r\n                       error\r\n                   );\r\n               }\r\n           };\r\n           fetchUpdatedData();\r\n           changeOnDB(false);\r\n       }\r\n       // eslint-disable-next-line react-hooks/exhaustive-deps\r\n   }, [changeDB]);\r\n\r\n        const ModalOpen1 = (event) => {\r\n            console.log(event.target.id);\r\n            setShowModal1(true);\r\n              }\r\n        const ModalOpen2 = (event) => {\r\n            console.log(event.target.id);\r\n            setShowModal2(true);\r\n              }\r\n        const ModalOpen3 = () => {\r\n            setShowModal3(true);\r\n              }\r\n\r\n        const handleClose1 = () => setShowModal1(false);\r\n        const handleClose2 = () => setShowModal2(false);\r\n        const handleClose3 = () => setShowModal3(false);\r\n\r\n\r\n        // logique pour ajouter le fondNoir\r\n     const [isAtTop1, setIsAtTop1] = useState(false);\r\n     const [isAtTop2, setIsAtTop2] = useState(false);\r\n     const ref1 = useRef(null);\r\n     const ref2 = useRef(null);\r\n\r\n     useEffect(() => {\r\n         const checkPosition = () => {\r\n             if (ref1.current) {\r\n                 const topPosition1 = ref1.current.getBoundingClientRect().top;\r\n                 setIsAtTop1(topPosition1===5)\r\n                \r\n             }\r\n             if (ref2.current) {\r\n                 const topPosition2 = ref2.current.getBoundingClientRect().top;\r\n                 setIsAtTop2(topPosition2 === 5);\r\n             }\r\n         };\r\n\r\n        \r\n\r\n         window.addEventListener(\"scroll\", checkPosition); // Suivre le scroll si l'élément peut bouger\r\n\r\n        \r\n     }, []);\r\n        \r\n    \r\n     \r\n// JSX\r\n\r\n    return (\r\n        <div className=\"fond\">\r\n            <h1>Bonjour {username}</h1>\r\n            <div className=\"present\">\r\n                <div className=\"align\">\r\n                    <p>\r\n                        Bienvenue sur l'interface d'administration de ta\r\n                        partothèque!\r\n                    </p>\r\n                    <p>Ici tu pourras: </p>\r\n                    <ul>\r\n                        <li>\r\n                            Ajouter/ Supprimer des partitions de ta partothèque\r\n                        </li>\r\n                        <li>\r\n                            Ajouter/ Supprimer des utilisateurs avec qui tu veux\r\n                            partager les partitions\r\n                        </li>\r\n                        <li>\r\n                            Visualiser (au survol) les partitions disponibles\r\n                            dans la partothèque de tes utilisateurs\r\n                        </li>\r\n                        <li>\r\n                            Partager tes partitions avec les utilisateurs (en\r\n                            faisant un \"glisser/déposer' de la partition sur\r\n                            l'utilisateur) ou supprimer des partitions de leur\r\n                            liste (glisser/déposer dans la poubelle)\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n            <main>\r\n                <div className=\"containerAdmin\">\r\n                    <h2 className=\"admin\">Partitions</h2>\r\n                    <div className=\"CD\">\r\n                        <div\r\n                            className=\"CDFondNoir\"\r\n                            ref={ref1}\r\n                            style={{\r\n                                backgroundColor: isAtTop1\r\n                                    ? \"rgba(0,0,0,0.95)\"\r\n                                    : \"transparent\",\r\n                            }}\r\n                        >\r\n                            <button\r\n                                className=\"plus\"\r\n                                data-title=\"Cliquer ici pour ajouter une partition à la collection\"\r\n                                onClick={(event) => ModalOpen1(event)}\r\n                                id=\"plusPart\"\r\n                            >\r\n                                <img\r\n                                    src={imgPlus}\r\n                                    alt=\"ajouter\"\r\n                                    draggable=\"false\"\r\n                                />\r\n                            </button>\r\n                            <img\r\n                                className=\"trash\"\r\n                                src={imgTrash}\r\n                                alt=\"poubelle\"\r\n                                onDragOver={\r\n                                    dragOrigin === \"doc\" ? onDragOver : null\r\n                                }\r\n                                draggable=\"true\"\r\n                                onDrop={(event) => onDrop(event)}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <ul className=\"listDoc\">\r\n                        {collection.length === 0 ? (\r\n                            <li className=\"noData\">\r\n                                Aucun utilisateur disponible\r\n                            </li>\r\n                        ) : (\r\n                            collection.map((user, index) => (\r\n                                <li\r\n                                    draggable=\"true\"\r\n                                    key={\"collection\" + index}\r\n                                    onDragStart={onDragStartDoc}\r\n                                    id={user[1]}\r\n                                    titre={user[0]}\r\n                                >\r\n                                    <DocumentAdmin titre={user[0]} />\r\n                                </li>\r\n                            ))\r\n                        )}\r\n                    </ul>\r\n                </div>\r\n                <div className=\"containerUser\">\r\n                    <h2 className=\"admin\">Liste d'utilisateurs</h2>\r\n                    <div className=\"CD\">\r\n                        <div\r\n                            className=\"CDFondNoir\"\r\n                            ref={ref2}\r\n                            style={{\r\n                                backgroundColor: isAtTop2\r\n                                    ? \"rgba(0,0,0,0.95)\"\r\n                                    : \"transparent\",\r\n                            }}\r\n                        >\r\n                            <button\r\n                                className=\"plus\"\r\n                                data-title=\"Cliquer ici pour ajouter un utilisateur\"\r\n                                onClick={(event) => ModalOpen2(event)}\r\n                                id=\"plusUser\"\r\n                            >\r\n                                <img\r\n                                    src={imgPlus}\r\n                                    alt=\"ajouter\"\r\n                                    draggable=\"false\"\r\n                                />\r\n                            </button>\r\n                            <img\r\n                                className=\"trash\"\r\n                                src={imgTrash}\r\n                                alt=\"poubelle\"\r\n                                onDragOver={\r\n                                    dragOrigin === \"user\" ? onDragOver : null\r\n                                }\r\n                                draggable=\"true\"\r\n                                onDrop={(event) => onDrop(event)}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <ul>\r\n                        {listUsers.length === 0 ? (\r\n                            <li className=\"noData\">\r\n                                Aucun utilisateur disponible\r\n                            </li>\r\n                        ) : (\r\n                            listUsers.map((user, index) => (\r\n                                <li\r\n                                    key={user.id_user}\r\n                                    onMouseEnter={() => showList(index)}\r\n                                    onMouseLeave={() => hideList(index)}\r\n                                    onDragOver={onDragOver}\r\n                                    onDrop={(event) => onDrop(event, { user })}\r\n                                    id={user.id_user}\r\n                                    onDragStart={onDragStartUser}\r\n                                >\r\n                                    <UserCard\r\n                                        alias={user.name}\r\n                                        id={index}\r\n                                        userId={user.id_user}\r\n                                        titres={user.titres}\r\n                                        onDragStartUserDocFnct={\r\n                                            onDragStartUserDoc\r\n                                        }\r\n                                    />\r\n                                </li>\r\n                            ))\r\n                        )}\r\n                    </ul>\r\n                    <FileUpload\r\n                        show={showModal1}\r\n                        handleClose={handleClose1}\r\n                        changeOnDB={changeOnDB}\r\n                    />\r\n                    <CreateUser show={showModal2} handleClose={handleClose2} />\r\n                    <TrashModal\r\n                        show={showModal3}\r\n                        handleClose={handleClose3}\r\n                        data={dataDelete}\r\n                        changeOnDB={changeOnDB}\r\n                    />\r\n                </div>\r\n            </main>\r\n        </div>\r\n    );\r\n};\r\nexport default AdminPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}